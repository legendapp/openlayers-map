<!--
`openlayers-map`
Displays a full bleed openlayers map

@demo demo/index.html 
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="openlayers-import.html">
<!-- <link rel="import" href="osmbuildings-import.html"> -->
<link rel="import" href="stamen-import.html">

<dom-module id="openlayers-map">
  <template>
    <style>
      :host {
        display: block;
      }

      .map {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
      }
    </style>

    <div id="map" class="map"></div>
  </template>

  <script>
    Polymer({
      is: 'openlayers-map',

      properties: {
        position: {
          type: Object,
          value: {
            "latitude": 42.5747630,
            "longitude": -70.7741700
          },
        },
        draggable: {
          type: Boolean,
          value: true
        },
        zoom: {
          type: Number,
          value: 15
        },
        stamenMap: {
          type: String,
          value: "watercolor"
        },
        features: {
          type: Array,
          value: []
        },
        map: Object,
        imageData: {
          type: String,
          notify: true,
          reflectToAttribute: true,
          value: "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"
        },
      },

      observers: [
        "recenterMap(position)",
        "clearAndRenderMarkers(features.features.*, map)"
      ],

      updateImageData: function() {
        setTimeout((function() {
          this.map.once('postcompose', (function(event) {
            var canvas = event.context.canvas;
            this.set('imageData', canvas.toDataURL('image/png'));
          }).bind(this));

          this.map.renderSync();
        }).bind(this), 1000)
      },

      clearAndRenderMarkers: function(splices) {
        if(!this.features || !this.map) return;

        // var iconFeatures=[];

        // var iconStyle = new ol.style.Style({
        //   image: new ol.style.Icon(/** @type {olx.style.IconOptions} */ ({
        //     anchor: [0.5, 1],
        //     opacity: 0.75,
        //     scale: 0.05,
        //     src: 'data:image/png;base64,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'
        //   }))
        // });

        // this.features.forEach(function(feature) {
        //   var iconFeature = new ol.Feature({
        //     geometry: new ol.geom.Point(ol.proj.fromLonLat([feature.longitude, feature.latitude])),
        //     name: 'Null Island',
        //     population: 4000,
        //     rainfall: 500
        //   });
        //   iconFeatures.push(iconFeature);
        // });

        // var vectorSource = new ol.source.Vector({
        //   features: iconFeatures
        // });

        var image = new ol.style.Circle({
          radius: 5,
          fill: new ol.style.Fill({color: "red"}),
          stroke: new ol.style.Stroke({color: 'red', width: 1})
        });

        var styles = {
          'Point': new ol.style.Style({
            image: image
          })
        };

        var vectorSource = new ol.source.Vector({
          features: (new ol.format.GeoJSON()).readFeatures(this.features, {featureProjection: 'EPSG:3857'})
        });

        console.log(vectorSource.getProjection());

        var styleFunction = function(feature) {
          return styles[feature.getGeometry().getType()];
        };

        this.map.removeLayer(this.featuresLayer);
        this.featuresLayer = new ol.layer.Vector({
          source: vectorSource,
          style: styleFunction
        });
        this.map.addLayer(this.featuresLayer);

        this.updateImageData();
      },

      recenterMap: function(position) {
        if(!this.map || !this.position) return;

        var coords = [this.position.coords.longitude, this.position.coords.latitude];
        this.map.getView().setCenter(ol.proj.fromLonLat(coords));

        this.updateImageData();
      },

      _initMap: function() {
        this.map = new ol.Map({
          renderer:'canvas',
          target: this.$.map,
          interactions: ol.interaction.defaults({
              // doubleClickZoom :false,
              dragAndDrop: false,
              dragPan: this.draggable,
              keyboardPan: false,
              keyboardZoom: false,
              // mouseWheelZoom: false,
              pointer: false,
              select: false
          }),
          layers: [
            new ol.layer.Tile({
              source: new ol.source.Stamen({
                layer: this.stamenMap
              })
            })
          ],
          view: new ol.View({
            center: ol.proj.fromLonLat([this.position.longitude, this.position.latitude]),
            zoom: this.zoom
          })
        });

        this.map.on("moveend", (function() {
          this.updateImageData();
        }).bind(this));

        // this.updateImageData();

        // this.push('features', { longitude: 42.5747630, latitude: -70.7741700 });

        // this.osm = new OSMBuildings(this.map);
        // this.osm.date(new Date())
        // this.osm.load();
      },

      ready: function() {
        // window.addEventListener('WebComponentsReady', this._initMap.bind(this));
        this._initMap();
      }
    });
  </script>
</dom-module>
